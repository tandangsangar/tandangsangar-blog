---
pagination:
  data: collections.categories
  size: 1
  alias: cat
permalink: /category/{{ cat | slug }}/
layout: layouts/base.njk
renderData:
  title: "{{ cat }} ARCHIVE"
---

<div class="bg-white mx-3 md:mx-6 min-h-screen border-2 border-black border-t-0">

    <div class="px-4 pt-12 md:pt-16 pb-8">
        <h1 class="text-6xl md:text-8xl font-header uppercase leading-none mb-6">
            {{ cat }} 
            <span class="block md:inline-block text-[#ccff00] bg-black px-3 py-1 ml-0 md:ml-4 text-3xl md:text-4xl align-middle border-2 border-[#ccff00] transform -rotate-2 mt-2 md:mt-0 w-max">
                COLLECTION
            </span>
        </h1>
        
        <div class="h-2 bg-black w-full mb-8"></div>

        <div class="flex flex-col md:flex-row justify-between items-end mb-8 border-b-4 border-black pb-4 gap-4">
            <h2 class="text-4xl md:text-5xl font-header uppercase">{{ cat }} ARCHIVE</h2>
            
            {% set categoryPosts = collections.posts | filterByCategory(cat) %}
            <span class="font-mono text-sm font-bold bg-[#ccff00] px-3 py-1 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
                {{ categoryPosts | length }} ITEMS
            </span>
        </div>
    </div>

    <section class="w-full border-t-2 border-black">
        <div class="grid grid-cols-1 md:grid-cols-4 auto-rows-[300px] md:auto-rows-[350px] gap-0 bg-black grid-flow-dense">
            
            {% for post in categoryPosts | reverse %}
                {# Hitung index loop (0, 1, 2...) #}
                {% set i = loop.index0 % 12 %}
                {% set spanClass = "md:col-span-1 md:row-span-1" %}

                {# Rumus Bento Grid #}
                {% if i == 0 or i == 4 or i == 10 %}
                    {% set spanClass = "md:col-span-2 md:row-span-2" %}
                {% elif i == 1 or i == 7 or i == 11 %}
                    {% set spanClass = "md:col-span-2 md:row-span-1" %}
                {% elif i == 2 or i == 5 or i == 8 %}
                    {% set spanClass = "md:col-span-1 md:row-span-2" %}
                {% endif %}

                <a href="{{ post.url }}" class="group relative block overflow-hidden border border-black bg-black {{ spanClass }}">
                    <div class="absolute inset-0 w-full h-full z-0">
                        <img src="{{ post.data.image }}" alt="{{ post.data.title }}" 
                            class="w-full h-full object-cover grayscale opacity-70 group-hover:grayscale-0 group-hover:opacity-100 transition-all duration-700">
                    </div>
                    
                    <div class="absolute inset-0 z-10 bg-gradient-to-t from-black/90 via-black/10 to-transparent pointer-events-none"></div>

                    <div class="relative z-20 h-full flex flex-col justify-between p-4 md:p-6">
                        <div class="self-start">
                          <span class="inline-block px-2 py-1 border border-black bg-[#ccff00] text-black font-mono text-[10px] md:text-xs font-bold uppercase shadow-[2px_2px_0px_#000]">
                            {{ post.data.category }}
                          </span>
                        </div>

                        <div class="translate-y-2 group-hover:translate-y-0 transition-transform duration-300">
                          <h3 class="font-header text-2xl md:text-3xl lg:text-4xl leading-[0.9] text-white uppercase mb-2 drop-shadow-[2px_2px_0px_#000]">
                            {{ post.data.title }}
                          </h3>
                          <div class="flex items-center gap-2 font-mono text-[10px] md:text-xs text-[#ccff00] font-bold uppercase opacity-60 group-hover:opacity-100 transition-opacity duration-300">
                             <span>{{ post.date | date("DD MMM YYYY") }}</span>
                             <span class="text-white">///</span>
                             <span>{{ post.data.author }}</span>
                          </div>
                        </div>
                    </div>
                </a>
            {% else %}
                <div class="col-span-full py-20 bg-white text-center flex flex-col items-center justify-center">
                    <h2 class="font-header text-3xl uppercase">NO DATA FOUND</h2>
                    <p class="font-mono">Belum ada artikel di kategori ini.</p>
                </div>
            {% endfor %}

        </div>
    </section>
</div>

<div class="h-16 md:h-32"></div>